<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css"
      rel="stylesheet"
      integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH"
      crossorigin="anonymous"
    />
    <style>
      body {
        background-color: #fefbf6;
      }
    </style>
  </head>

  <body>
    <div class="jumbotron jumbotron-fluid" style="background-color: #638889">
      <div class="container">
        <h1
          class="display-4"
          style="
            color: white;
            text-align: center;
            font-family: system-ui;
            font-weight: 700;
          "
        >
          Is this recyclable?
        </h1>
        <p class="lead" style="color: white; text-align: center">
          Upload your image to determine if your item is organic or recyclable.
        </p>
      </div>
    </div>
    <img
      src="https://i.pinimg.com/originals/2f/31/f6/2f31f62964418a236e5a15c0de9617ed.jpg"
      class="img-fluid mx-auto d-block"
      width="300"
      style="object-fit: cover; object-position: center"
      alt="Responsive image"
    />
    <!-- Main Content Section -->
    <div class="container">
      <div class="row">
        <div class="container mx-auto text-center">
          <h2>How It Works</h2>
          <p>
            Your ML image classifier analyzes images uploaded by users to
            determine whether the waste is recyclable or organic. It uses
            advanced machine learning algorithms to classify images with high
            accuracy. This technology helps in efficiently sorting waste,
            promoting recycling, and reducing environmental impact.
          </p>
        </div>
      </div>
    </div>

    <div class="container">
      <div class="row">
        <div class="col-sm-3"></div>
        <div class="col-sm-3">
          <p class="lead"></p>
          <form method="post" action="/" enctype="multipart/form-data">
            <dl>
              <p>
                <input
                  type="file"
                  name="file"
                  autocomplete="off"
                  required
                  onchange="loadFile(event)"
                />
              </p>
            </dl>
            <p><img id="output" width="200" /></p>
            <p>
              <input type="submit" class="btn btn-primary" value="Submit" />
            </p>
          </form>
        </div>
        <div class="col-sm-3">
          <p></p>
          <div id="results">
            <h5
              style="
                background-color: #688c8c;
                text-align: center;
                font-family: sans-serif;
                color: white;
                padding-top: 30px;
                padding-bottom: 30px;
              "
            >
              <span>
                {% with messages = get_flashed_messages() %} {% if messages %}
                Waste Category: {{ messages[0] }}
                <br />
                Probability: {{ (messages[1]|float*100) }}%
                <img
                  src="{{ url_for('static', filename=messages[2])}}"
                  width="200"
                />
                {% endif %} {% endwith %}
              </span>
            </h5>
          </div>
        </div>
        <div class="col-sm-3"></div>
      </div>
    </div>
    <div>
      <script>
        var loadFile = function (event) {
          var image = document.getElementById("output");
          image.src = URL.createObjectURL(event.target.files[0]);
        };
      </script>
    </div>
  </body>
  <!-- Footer Section -->
  <footer class="footer mt-auto py-3 bg-dark text-white text-center">
    <div class="container">
      <span>Made with ðŸ’œ</span>
    </div>
  </footer>
</html>
